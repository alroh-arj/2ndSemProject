@page "/administrate_shifts"
@using New2ndSemester.Shared
@using New2ndSemester.Client.Services
@inject IShiftService _shiftService

<h1>Administrer Vagter</h1>

<hr />

<div class="row row-cols-2">
    <div>
        <h2>Opret ny vagt</h2>
        <div class="mb-3">
            <div class="mb-3">
                <label for="exampleFormControlSelect1">Vagt</label>
                <select @onselect="StateHasChanged" bind="@_selectedShift" class="form-control" id="exampleFormControlSelect1">
                    @foreach(var shift in _shifts)
                    {
                        <option value="@shift">@shift.title</option>
                    }
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Titel</label>
                <input @bind="_selectedShift.title" type="text" class="form-control" autofocus>
            </div>
            <div class="mb-3">
                <label class="form-label">Beskrivelse</label>
                <textarea @bind="_selectedShift.description" class="form-control mb-2" rows="3"></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Antal Frivillige (@_selectedShift.required_volunteers)</label>
                <input @bind="_selectedShift.required_volunteers" type="range" class="form-range" min="0" max="32" step="1" id="customRange3">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlSelect1">Lokalitet</label>
                <select class="form-control" id="exampleFormControlSelect1">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                </select>
            </div>
            <div class="d-flex justify-content-center">
                <button class="btn btn-primary">Opret vagt</button>
            </div>
        </div>
    </div>
    <div>
        @* <h2>Opret ny lokalitet</h2> *@
        @* <div class="mb-3"> *@
        @*     <div class="mb-3"> *@
        @*         <label class="form-label">Titel</label> *@
        @*         <input @bind="_newShift.title" type="text" class="form-control" autofocus> *@
        @*     </div> *@
        @*     <div class="mb-3"> *@
        @*         <label class="form-label">Beskrivelse</label> *@
        @*         <textarea @bind="_newShift.description" class="form-control mb-2" rows="3"></textarea> *@
        @*     </div> *@
        @*     <div class="mb-3"> *@
        @*         <div class="row row-cols-2"> *@
        @*             <div> *@
        @*                 <label for="customRange2">X-Koordinat: @_newLocation.x</label> *@
        @*                 <input @bind="_newLocation.x" type="range" class="form-range" min="0" max="1" step="0.01" id="customRange1"> *@
        @*             </div> *@
        @*             <div> *@
        @*                 <label for="customRange2">Y-Koordinat: @_newLocation.y</label> *@
        @*                 <input @bind="_newLocation.y" type="range" class="form-range" min="0" max="1" step="0.01" id="customRange1"> *@
        @*             </div> *@
        @*         </div> *@
        @*     </div> *@
        @*     <div class="d-flex justify-content-center"> *@
        @*         <button class="btn btn-primary">Opret lokalitet</button> *@
        @*     </div> *@
        @* </div> *@
    </div>
</div>

@code {
    private static Shift _selectedShift = new Shift
    {
        id = 0,
        title = "Ny vagt",
        description = "",
        location_id = 0,
        required_volunteers = 1,
        start = DateTime.Now,
        stop = DateTime.Now,
    };
    private List<Shift> _shifts = new List<Shift>{ _selectedShift };

    private List<Location> _locations = new ();

    protected override async void OnInitialized()
    {
        _shifts.AddRange((await _shiftService.GetAllShifts()).Select(es => es.shift));
        StateHasChanged();
    }

}
